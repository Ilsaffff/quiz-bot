import telebot
import sqlite3
from telebot import types
import set

bot = telebot.TeleBot(set.TOKEN)


# —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—Ä–æ–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏—è
@bot.message_handler(commands=['website'])
def open_website(message):
    markup = types.InlineKeyboardMarkup()  # —Å–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –≤–Ω—É—Ç—Ä–∏ —á–∞—Ç–∞
    markup.add(types.InlineKeyboardButton('GitHub', url='https://github.com/Ilsaffff'))
    markup.add(types.InlineKeyboardButton('Telegram', url='t.me/ilsaffff'))
    bot.send_message(message.chat.id, "–•–æ—á–µ—à—å —Å–≤—è–∑–∞—Ç—å—Å—è —Å–æ –º–Ω–æ–π?", parse_mode='html',
                     reply_markup=markup)


@bot.message_handler(commands=['start'])
def start(message):
    with sqlite3.connect('server.db') as connect:
        cursor = connect.cursor()
    # —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∏–∑ —Ñ–∞–π–ª–∞ .sql
    with open('sqlite_create_tables.sql', 'r') as sqlite_file:
        sql_script = sqlite_file.read()
    cursor.executescript(sql_script)
    connect.commit()

    # –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—â–∏–π id
    cursor.execute("SELECT * FROM users WHERE id=?", (message.from_user.id,))
    data = cursor.fetchone()
    if data is None:
        # –∑–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö –≤ —Å–æ–æ—Ç–≤–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–æ–ª–±—Ü—ã
        users = [message.chat.id, message.from_user.username]
        sqlite_insert = """INSERT INTO users 
                (id, login)
                VALUES (?,?)"""
        cursor.execute(sqlite_insert, users)
        connect.commit()

    send_mess = f"<b>–ü—Ä–∏–≤–µ—Ç, {message.from_user.first_name} {message.from_user.last_name}!</b> \n" \
                "–ù–∞–ø–∏—à–∏ /game —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∏–≥—Ä–∞—Ç—å"
    bot.send_message(message.chat.id, send_mess, parse_mode='html')


@bot.message_handler(commands=['delete'])
def delete(message):
    # connect DB
    with sqlite3.connect('server.db') as connect:
        cursor = connect.cursor()

    # delete id from DB
    cursor.execute("DELETE from users where id=?", (message.from_user.id,))
    connect.commit()
    connect.close()


@bot.message_handler(commands=['game'])
def game(message):
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=2)
    topic1 = types.KeyboardButton('–ö–æ—Å–º–æ—Å')
    topic2 = types.KeyboardButton('–ö–Ω–∏–≥–∏')
    markup.add(topic1, topic2)
    bot.send_message(message.chat.id, text='–ö–∞–∫–∞—è —Ç–µ–º–∞ Quiz —Ç–µ–±—è –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?', reply_markup=markup)
    # bot.send_message(message.chat.id, message)


@bot.message_handler(content_types=['text'])
def cosmos(message):
    global markup, final_message
    get_message_bot = message.text
    if get_message_bot == '–ö–æ—Å–º–æ—Å':
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=3)
        btn1 = types.KeyboardButton('1961')
        btn2 = types.KeyboardButton('1969')
        btn3 = types.KeyboardButton('1966')
        markup.add(btn1, btn2, btn3)
        final_message = '–í –∫–∞–∫–æ–º –≥–æ–¥—É —á–µ–ª–æ–≤–µ–∫ –≤–ø–µ—Ä–≤—ã–µ –≤—ã—Å–∞–¥–∏–ª—Å—è –Ω–∞ –õ—É–Ω—É?'
    elif get_message_bot == '1961' or get_message_bot == '1966':
        final_message = '–ù–µ–≤–µ—Ä–Ω–æ :(\n' \
                        '–ü–æ—Å–º–æ—Ç—Ä–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ —ç—Ç—É <a href="https://mediamax.am/ru/news/parzabanum/34280/">' \
                        '—Å—Ç–∞—Ç—å—é</a>\n' \
                        '–ò –Ω–∞–ø–∏—à–∏ —Å–Ω–æ–≤–∞ /game'

    if get_message_bot == '1969':
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=3)
        btn1 = types.KeyboardButton('7')
        btn2 = types.KeyboardButton('8')
        btn3 = types.KeyboardButton('9')
        markup.add(btn1, btn2, btn3)
        final_message = '–°–∫–æ–ª—å–∫–æ –ø–ª–∞–Ω–µ—Ç —Å—É—â–µ—Å—Ç—É–≤—É–µ—Ç –≤ –°–æ–ª–Ω–µ—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –Ω–∞ 2022 –≥–æ–¥?'

    elif get_message_bot == '7' or get_message_bot == '8':
        final_message = '–ù–µ–≤–µ—Ä–Ω–æ :(\n' \
                        '–ü–æ—Å–º–æ—Ç—Ä–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ —ç—Ç—É <a href="https://postnauka.ru/tv/64056">' \
                        '—Å—Ç–∞—Ç—å—é</a>\n' \
                        '–ò –Ω–∞–ø–∏—à–∏ —Å–Ω–æ–≤–∞ /game'

    if get_message_bot == '9':
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=3)
        btn1 = types.KeyboardButton('75')
        btn2 = types.KeyboardButton('65')
        btn3 = types.KeyboardButton('79')
        markup.add(btn1, btn2, btn3)
        final_message = '–°–∫–æ–ª—å–∫–æ —Å–ø—É—Ç–Ω–∏–∫–æ–≤ —É –Æ–ø–∏—Ç–µ—Ä–∞ –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—é 2018 –≥–æ–¥–∞?'
    elif get_message_bot == '75' or get_message_bot == '65':
        final_message = '–ù–µ–≤–µ—Ä–Ω–æ :(\n' \
                        '–ü–æ—Å–º–æ—Ç—Ä–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ —ç—Ç—É <a href="https://starwalk.space/ru/news/jupiter-galilean-moons">' \
                        '—Å—Ç–∞—Ç—å—é</a>\n' \
                        '–ò –Ω–∞–ø–∏—à–∏ —Å–Ω–æ–≤–∞ /game'
    if get_message_bot == '79':
        final_message = '<b>–ú–æ–ª–æ–¥–µ—Ü, —Ç—ã –æ—Ç–≤–µ—Ç–∏–ª –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –≤–µ—Ä–Ω–æ!üî•</b>\n' \
                        '–ê —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—à—å –ø–µ—Ä–µ–π—Ç–∏ –∫–æ –≤—Ç–æ—Ä–æ–π —Ç–µ–º–µ, –µ—Å–ª–∏ —Ç—ã –µ—â—ë –Ω–µ —Ä–µ—à–∞–ª –µ—ë, –Ω–∞–ø–∏—Å–∞–≤ /game\n' \
                        '–ù–∞–ø–∏—Å–∞–≤ <b>/website</b> —Ç—ã –º–æ–∂–µ—à—å —Å–≤—è–∑–∞—Ç—å—Å—è —Å —Å–æ–∑–¥–∞—Ç–µ–ª–µ–º –¥–∞–Ω–Ω–æ–≥–æ –±–æ—Ç–∞'

    if get_message_bot == '–ö–Ω–∏–≥–∏':
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=3)
        btn1 = types.KeyboardButton('–¢–æ–ª—Å—Ç–æ–π –õ.–ù.')
        btn2 = types.KeyboardButton('–®–æ–ª–æ—Ö–æ–≤ –ú.–ê.')
        btn3 = types.KeyboardButton('–°–ª–æ–∂–µ–Ω–∏—Ü—ã–Ω –ê.–ò')
        markup.add(btn1, btn2, btn3)
        final_message = '–ö–æ–º—É –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ "–¢–∏—Ö–∏–π –î–æ–Ω"?'
    elif get_message_bot == '–¢–æ–ª—Å—Ç–æ–π –õ.–ù.' or get_message_bot == '–°–ª–æ–∂–µ–Ω–∏—Ü—ã–Ω –ê.–ò':
        final_message = '–ù–µ–≤–µ—Ä–Ω–æ :(\n' \
                        '–ü—Ä–æ—á–∏—Ç–∞–π, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ <a href="https://www.litres.ru/mihail-sholohov/tihiy-don/">' \
                        '–≤–µ–ª–∏–∫–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ</a>\n' \
                        '–ò –Ω–∞–ø–∏—à–∏ —Å–Ω–æ–≤–∞ /game'

    if get_message_bot == '–®–æ–ª–æ—Ö–æ–≤ –ú.–ê.':
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=3)
        btn1 = types.KeyboardButton('‚Ññ1')
        btn2 = types.KeyboardButton('‚Ññ2')
        btn3 = types.KeyboardButton('‚Ññ3')
        markup.add(btn1, btn2, btn3)
        photo1 = open('photo1.jpg', 'rb')
        bot.send_message(message.chat.id, text='‚Ññ1')
        bot.send_photo(message.chat.id, photo1)
        photo2 = open('photo2.jfif', 'rb')
        bot.send_message(message.chat.id, text='‚Ññ2')
        bot.send_photo(message.chat.id, photo2)
        photo3 = open('photo3.jfif', 'rb')
        bot.send_message(message.chat.id, text='‚Ññ3')
        bot.send_photo(message.chat.id, photo3)
        final_message = '–ù–∞ –∫–∞–∫–æ–π –∏–∑ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω –î–æ—Å—Ç–æ–≤–µ—Å–∫–∏–π –§.–ú.? '
    elif get_message_bot == '‚Ññ2' or get_message_bot == '‚Ññ3':
        final_message = '–ù–µ–≤–µ—Ä–Ω–æ :(\n' \
                        '–ü–æ—Å–º–æ—Ç—Ä–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞<a href="https://azbyka.ru/fiction/wp-content/uploads/2017/08/864.jpg">' \
                        '–ø–æ—Ä—Ç—Ä–µ—Ç –î–æ—Å—Ç–æ–µ–≤—Å–∫–æ–≥–æ</a>\n' \
                        '–ò –Ω–∞–ø–∏—à–∏ —Å–Ω–æ–≤–∞ /game'
    if get_message_bot == '‚Ññ1':
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=3)
        btn1 = types.KeyboardButton('–ú–æ—Å–∫–≤–∞')
        btn2 = types.KeyboardButton('–ê—Ñ–∏–Ω—ã')
        btn3 = types.KeyboardButton('–ö–∏–µ–≤')
        markup.add(btn1, btn2, btn3)
        final_message = '–í –∫–∞–∫–æ–º –≥–æ—Ä–æ–¥–µ –±—ã–ª–∞ –Ω–∞–ø–∏—Å–∞–Ω–∞ –ª–µ—Ç–æ–ø–∏—Å—å "–ü–æ–≤–µ—Å—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ª–µ—Ç"?'
    elif get_message_bot == '–ú–æ—Å–∫–≤–∞' or get_message_bot == '–ê—Ñ–∏–Ω—ã':
        final_message = '–ù–µ–≤–µ—Ä–Ω–æ :(\n' \
                        '–ü–æ—Å–º–æ—Ç—Ä–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞' \
                        '<a href="https://azbyka.ru/otechnik/Nestor_Letopisets/povest-vremennyh-let/">' \
                        '—Å—Ç–∞—Ç—å—é –æ –ª–µ—Ç–æ–ø–∏—Å–∏</a>\n' \
                        '–ò –Ω–∞–ø–∏—à–∏ —Å–Ω–æ–≤–∞ /game'
    if get_message_bot == '–ö–∏–µ–≤':
        final_message = '<b>–ú–æ–ª–æ–¥–µ—Ü, —Ç—ã –≤—ã–ø–æ–ª–Ω–∏–ª –≤–µ—Ä–Ω–æ –≤—Ç–æ—Ä–æ–π –º–æ–¥—É–ª—å!</b>\n' \
                        '–ù–∞–ø–∏—Å–∞–≤ <b>/website</b> —Ç—ã –º–æ–∂–µ—à—å —Å–≤—è–∑–∞—Ç—å—Å—è —Å —Å–æ–∑–¥–∞—Ç–µ–ª–µ–º –¥–∞–Ω–Ω–æ–≥–æ –±–æ—Ç–∞'
    bot.send_message(message.chat.id, text=final_message, reply_markup=markup, parse_mode='html')


bot.polling(none_stop=True)
